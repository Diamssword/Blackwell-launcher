<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="compiled.css">
  </head>
  <body>
   <div class="fixed left-0 top-0 h-screen w-5/12 bg-gray-500">
    <div id="ProfilePicker" >
    </div>
    <input type="button" value="LAUNCH" class="bg-red-500 centered-input" onclick="window.send('launch')"/>
    <input type="button" value="MOJANG" class="bg-red-500 centered-input" onclick="window.send('open','mojang')"/>
    <input type="button" value="MICROSOFT" class="bg-microsoft centered-input" onclick="window.send('open','microsoft')"/>
    </div>
    <div class="fixed top-0 right-0 h-screen w-7/12 bg-blue-500">
    
      </div>
  </body>
</html>

<script src="js/ProfilePicker.js"></script>
<script src="js/head_cutter.js"></script>
<script>
  /**
   * The code can be included in some JS file and included
   * via require or <script> in the renderer process
   */

  const { ipcRenderer } = require('electron');
    window.send =(channel,msg)=>{
      ipcRenderer.send(channel,msg)
    }
    window.on =(channel,callback)=>{
      ipcRenderer.on(channel,(ev,data)=>{  callback(data)});
    }
    ipcRenderer.on("skin",(ev,data)=>{
      
  extractHeadFromSkin(data)
  })

  // Some data that will be sent to the main process
  

  // Send information to the main process
  // if a listener has been set, then the main process
  // will react to the request !
  function run()
  {
    let Data = {
      log: document.getElementById("mail").value,
      pass: document.getElementById("pass").value
  };
  ipcRenderer.send('action', Data);
}
</script>



<script>
  var profilePicker;
  window.send("requestProfiles","")
  window.on("getProfiles",(prof)=>{
    profilePicker =new ProfilePicker(document.getElementById("ProfilePicker"),prof);
  });
  window.on("updateProfiles",(prof)=>{
    profilePicker.loadProfiles(prof);
  });
  window.on("updateIcon",(data)=>{
    extractHeadFromSkin(data.img,(res)=>{
      profilePicker.updateIcon(data.id,res)
    })
  });
</script>